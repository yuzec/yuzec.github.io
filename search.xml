<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Hexo+NexT+GitHub Pages搭建个人博客</title>
    <url>/Tutorial/2022-11-13-Hexo-NexT-GitHub-Pages%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/</url>
    <content><![CDATA[<h3 id="安装Hexo"><a href="#安装Hexo" class="headerlink" title="安装Hexo"></a>安装Hexo</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ npm install -g hexo-cli</span><br></pre></td></tr></table></figure>

<h3 id="创建Hexo项目"><a href="#创建Hexo项目" class="headerlink" title="创建Hexo项目"></a>创建Hexo项目</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo init my-blog</span><br><span class="line">$ <span class="built_in">cd</span> my-blog</span><br><span class="line">$ npm install</span><br></pre></td></tr></table></figure>

<span id="more"></span>

<h3 id="启动服务器"><a href="#启动服务器" class="headerlink" title="启动服务器"></a>启动服务器</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>启动服务器后，打开<a href="http://localhost:4000/">http://localhost:4000/</a>进行访问。</p>
<h3 id="安装NexT主题"><a href="#安装NexT主题" class="headerlink" title="安装NexT主题"></a>安装NexT主题</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> https://github.com/theme-next/hexo-theme-next themes/next</span><br></pre></td></tr></table></figure>
<p>然后修改<code>my-blog/_config.yml</code>中的</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">theme:</span> <span class="string">next</span></span><br></pre></td></tr></table></figure>
<p>即可切换为NexT主题。</p>
<h3 id="修改Hexo配置"><a href="#修改Hexo配置" class="headerlink" title="修改Hexo配置"></a>修改Hexo配置</h3><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># my-blog/_config.yml</span></span><br><span class="line"></span><br><span class="line"><span class="attr">title:</span> <span class="string">Yuzec&#x27;s</span> <span class="string">blog</span>           <span class="comment"># 网站的标题</span></span><br><span class="line"><span class="attr">subtitle:</span> <span class="string">博观约取，厚积薄发。</span>   <span class="comment"># 网站的副标题</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">Yuzec的个人博客</span>   <span class="comment"># 网站的描述，主要用于SEO，使得搜索引擎更容易检索</span></span><br><span class="line"><span class="attr">keywords:</span> <span class="string">前端,Python,Ubuntu</span>  <span class="comment"># 网站的关键词，可以为多个</span></span><br><span class="line"><span class="attr">author:</span> <span class="string">Yuzec</span>     <span class="comment"># 作者名称，用于显示文章的作者</span></span><br><span class="line"><span class="attr">language:</span> <span class="string">zh-CN</span>   <span class="comment"># 网站使用的语言(NexT主题不能用zh-Hans)</span></span><br><span class="line"><span class="attr">timezone:</span> <span class="string">Asia/Shanghai</span> <span class="comment"># 时区</span></span><br><span class="line"></span><br><span class="line"><span class="attr">url:</span> <span class="string">https://yuzec.github.io</span> <span class="comment"># 网站的地址</span></span><br><span class="line"><span class="attr">permalink:</span> <span class="string">:category/:year-:month-:day-:title/</span>  <span class="comment"># 修改文章链接的格式</span></span><br></pre></td></tr></table></figure>
<p>这里有个小坑，打开<code>my-blog/themes/next/languages</code>文件夹可以看到，NexT主题下只有<code>zh-CN.yml</code>而没有<code>zh-Hans.yml</code>，因此在设置<code>language</code>时只能设置为<code>zh-CN</code>而不能是<code>zh-Hans</code>。</p>
<h3 id="修改NexT配置"><a href="#修改NexT配置" class="headerlink" title="修改NexT配置"></a>修改NexT配置</h3><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># my-blog/themes/next/_config.yml</span></span><br><span class="line"></span><br><span class="line"><span class="attr">favicon:</span>  <span class="comment"># 网站标签页图标</span></span><br><span class="line">  <span class="attr">small:</span> <span class="string">/images/favicon-16x16-next.png</span></span><br><span class="line">  <span class="attr">medium:</span> <span class="string">/images/favicon-32x32-next.png</span></span><br><span class="line">  <span class="attr">apple_touch_icon:</span> <span class="string">/images/apple-touch-icon-next.png</span></span><br><span class="line">  <span class="attr">safari_pinned_tab:</span> <span class="string">/images/logo.svg</span></span><br><span class="line"></span><br><span class="line"><span class="attr">footer:</span></span><br><span class="line">  <span class="attr">powered:</span> <span class="literal">false</span>  <span class="comment"># 去除页脚的Hexo &amp; NexT链接</span></span><br><span class="line"></span><br><span class="line"><span class="attr">creative_commons:</span> <span class="comment"># 开启版权信息声明</span></span><br><span class="line">  <span class="attr">license:</span> <span class="string">by-nc-sa</span></span><br><span class="line">  <span class="attr">sidebar:</span> <span class="literal">true</span>   <span class="comment"># 侧边栏中的版权标识</span></span><br><span class="line">  <span class="attr">post:</span> <span class="literal">true</span>      <span class="comment"># 文章下方的版权信息</span></span><br><span class="line">  <span class="attr">language:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">schemes:</span> <span class="string">Pisces</span> <span class="comment"># 一共有Muse、Mist、Pisces、Gemini四种风格的主题</span></span><br><span class="line"></span><br><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="attr">home:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-home</span>       <span class="comment"># 主页</span></span><br><span class="line">  <span class="attr">tags:</span> <span class="string">/tags/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-tags</span>  <span class="comment"># 标签</span></span><br><span class="line">  <span class="attr">categories:</span> <span class="string">/categories/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-th</span>  <span class="comment"># 分类</span></span><br><span class="line">  <span class="attr">archives:</span> <span class="string">/archives/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-archive</span> <span class="comment"># 归档</span></span><br><span class="line"></span><br><span class="line"><span class="attr">menu_settings:</span></span><br><span class="line">  <span class="attr">icons:</span> <span class="literal">true</span>   <span class="comment"># 开启菜单图标</span></span><br><span class="line">  <span class="attr">badges:</span> <span class="literal">true</span>  <span class="comment"># 显示标签、分类、归档的数量</span></span><br><span class="line"></span><br><span class="line"><span class="attr">avatar:</span></span><br><span class="line">  <span class="attr">url:</span> <span class="string">/images/avatar.gif</span> <span class="comment"># 头像</span></span><br><span class="line">  <span class="attr">rounded:</span> <span class="literal">true</span>   <span class="comment"># 是否为圆角</span></span><br><span class="line">  <span class="attr">rotated:</span> <span class="literal">false</span>  <span class="comment"># 鼠标移上是否旋转</span></span><br><span class="line"></span><br><span class="line"><span class="attr">social:</span>   <span class="comment"># 社交账号</span></span><br><span class="line">  <span class="attr">GitHub:</span> <span class="string">https://github.com/yuzec</span> <span class="string">||</span> <span class="string">fab</span> <span class="string">fa-github</span></span><br><span class="line">  <span class="attr">E-Mail:</span> <span class="string">mailto:yuzec@163.com</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-envelope</span></span><br><span class="line"></span><br><span class="line"><span class="attr">links_settings:</span> <span class="comment"># 友情链接</span></span><br><span class="line">  <span class="attr">icon:</span> <span class="string">fa</span> <span class="string">fa-link</span></span><br><span class="line">  <span class="attr">title:</span> <span class="string">友情链接</span></span><br><span class="line">  <span class="attr">layout:</span> <span class="string">inline</span>  <span class="comment"># 链接排列方式，有block和inline两种形式</span></span><br><span class="line"></span><br><span class="line"><span class="attr">links:</span>  <span class="comment"># 添加多个友情链接</span></span><br><span class="line">  <span class="attr">Hexo:</span> <span class="string">https://hexo.io/zh-cn/</span></span><br><span class="line">  <span class="attr">NexT:</span> <span class="string">https://theme-next.js.org/</span></span><br><span class="line"></span><br><span class="line"><span class="attr">tag_icon:</span> <span class="literal">true</span>  <span class="comment"># 文章底部的标签：用图标替代#号进行显示</span></span><br><span class="line"></span><br><span class="line"><span class="attr">codeblock:</span>  <span class="comment"># 代码块</span></span><br><span class="line">  <span class="comment"># 代码块的主题: normal | night | night eighties | night blue | night bright | solarized | solarized dark | galactic</span></span><br><span class="line">  <span class="attr">highlight_theme:</span> <span class="string">normal</span></span><br><span class="line">  <span class="attr">copy_button:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span>      <span class="comment"># 开启复制按钮</span></span><br><span class="line">    <span class="attr">show_result:</span> <span class="literal">true</span> <span class="comment"># 开启复制成功的样式</span></span><br><span class="line">    <span class="attr">style:</span> <span class="string">default</span>    <span class="comment"># 有3种主题: default | flat | mac</span></span><br><span class="line"></span><br><span class="line"><span class="attr">back2top:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">sidebar:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">scrollpercent:</span> <span class="literal">true</span> <span class="comment"># 开启滑动百分比</span></span><br><span class="line"></span><br><span class="line"><span class="attr">reading_progress:</span> <span class="comment"># 开启阅读进度条</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">top</span></span><br><span class="line">  <span class="attr">color:</span> <span class="string">&quot;#bfa&quot;</span></span><br><span class="line">  <span class="attr">height:</span> <span class="string">3px</span></span><br><span class="line"></span><br><span class="line"><span class="attr">github_banner:</span>  <span class="comment"># 开启页面右上角的GitHub三角形图标</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">permalink:</span> <span class="string">https://github.com/yuzec</span></span><br><span class="line">  <span class="attr">title:</span> <span class="string">Follow</span> <span class="string">me</span> <span class="string">on</span> <span class="string">GitHub</span></span><br><span class="line"></span><br><span class="line"><span class="attr">busuanzi_count:</span> <span class="comment"># 开启访客数记录</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">total_visitors:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">total_visitors_icon:</span> <span class="string">fa</span> <span class="string">fa-user</span></span><br><span class="line">  <span class="attr">total_views:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">total_views_icon:</span> <span class="string">fa</span> <span class="string">fa-eye</span></span><br><span class="line">  <span class="attr">post_views:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">post_views_icon:</span> <span class="string">fa</span> <span class="string">fa-eye</span></span><br></pre></td></tr></table></figure>
<h4 id="开启标签-分类功能"><a href="#开启标签-分类功能" class="headerlink" title="开启标签/分类功能"></a>开启标签/分类功能</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo new page tags</span><br><span class="line">hexo new page categories</span><br></pre></td></tr></table></figure>
<p>修改<code>my-blog/source/tags/index.md</code></p>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: 标签</span><br><span class="line"><span class="section">type: tags</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure>
<p>修改<code>my-blog/source/categories/index.md</code></p>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: 分类</span><br><span class="line"><span class="section">type: categories</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure>

<h4 id="开启搜索功能"><a href="#开启搜索功能" class="headerlink" title="开启搜索功能"></a>开启搜索功能</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ npm install hexo-generator-searchdb</span><br></pre></td></tr></table></figure>
<p>在<code>my-blog/_config.yml</code>中添加</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">search:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">search.xml</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">post</span></span><br><span class="line">  <span class="attr">content:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">format:</span> <span class="string">html</span></span><br></pre></td></tr></table></figure>
<p>修改<code>my-blog/themes/next/_config.yml</code></p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">local_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h3 id="创建一篇新的博文"><a href="#创建一篇新的博文" class="headerlink" title="创建一篇新的博文"></a>创建一篇新的博文</h3><p>执行以下命令创建一篇新的博文：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new my-first-blog</span><br></pre></td></tr></table></figure>
<p>此时，在<code>my-blog/source/_posts</code>文件夹下会有一个名为<code>my-first-blog.md</code>的markdown文件，该文件的内容即为新的博文。</p>
<p>打开<code>my-first-blog.md</code>进行编辑：</p>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: My first blog  # 文章的标题</span><br><span class="line">date: 2022-11-13 19:30:54 # 文章的创建时间</span><br><span class="line">categories: # 分类，一般情况下，一篇文章只能有一个分类</span><br><span class="line"><span class="bullet">-</span> class1</span><br><span class="line">tags: # 标签，一篇文章可以有多个标签</span><br><span class="line"><span class="bullet">-</span> tag1</span><br><span class="line"><span class="bullet">-</span> tag2</span><br><span class="line"><span class="section">- tag3</span></span><br><span class="line"><span class="section">---</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 文章的内容区</span></span><br><span class="line">这是我的第一篇博文。</span><br></pre></td></tr></table></figure>

<h3 id="部署到GitHub-Pages"><a href="#部署到GitHub-Pages" class="headerlink" title="部署到GitHub Pages"></a>部署到GitHub Pages</h3><ol>
<li><p>安装hexo-deployer-git</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure></li>
<li><p>修改Hexo配置</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># my-blog/_config.yml</span></span><br><span class="line"></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">git@github.com:yuzec/yuzec.github.io.git</span>  <span class="comment"># GitHub Pages地址</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span>  <span class="comment"># 分支名称</span></span><br></pre></td></tr></table></figure></li>
<li><p>生成站点文件并推送至GitHub</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo clean  <span class="comment"># 清除缓存文件(db.json)和已生成的静态文件(public)</span></span><br><span class="line">$ hexo deploy <span class="comment"># 将站点文件推送至GitHub</span></span><br></pre></td></tr></table></figure></li>
</ol>
]]></content>
      <categories>
        <category>Tutorial</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>NexT</tag>
        <tag>GitHub Pages</tag>
        <tag>Blog</tag>
      </tags>
  </entry>
  <entry>
    <title>git-将修改保存到另一个分支上</title>
    <url>/Tutorial/2022-12-14-git-%E5%B0%86%E4%BF%AE%E6%94%B9%E4%BF%9D%E5%AD%98%E5%88%B0%E5%8F%A6%E4%B8%80%E4%B8%AA%E5%88%86%E6%94%AF%E4%B8%8A/</url>
    <content><![CDATA[<p>今天将master分支上的代码拉下来修改，改完了提交的时候才发现要提交到feature分支上，但是此时再使用<code>git checkout feature</code>命令切换分支会报错，git会告诉你当前分支下有修改没有被commit，要先commit后才能切换分支。然而我们并不想将修改commit到当前分支，更何况commit后再切换分支，得到的是之前的feature分支，并没有将我们的修改也切过来。那要怎么样才能将master分支上的修改保存到feature分支上呢？总不能一行一行代码粘过来吧，经过一番搜索发现，其实git早已经帮我们想到了：</p>
<span id="more"></span>

<ol>
<li><p>在当前分支上（不要将修改commit）使用以下命令将修改缓存起来：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git stash</span><br></pre></td></tr></table></figure>
<p>此时，当前分支下的工作区和暂存区就干净了，可以愉快地切换分支了。</p>
<p>附：如果已经不小心commit了，需要使用以下命令将commit操作撤销：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git reset HEAD^</span><br></pre></td></tr></table></figure>
<p>（不要漏掉最后的<code>^</code>哦！）</p>
<p>补充：当工作区有新增的文件时，直接使用<code>git stash</code>不会将新增的文件进行缓存，需要先使用<code>git add</code>将新增的文件加入到暂存区（注意：依然不要进行commit），再使用<code>git stash</code>进行缓存操作。</p>
</li>
<li><p>切换分支：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git checkout feature</span><br></pre></td></tr></table></figure></li>
<li><p>将之前缓存的修改释放出来：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git stash pop</span><br></pre></td></tr></table></figure>
<p>此时，修改后的代码就已经出现在feature分支上了。最后再使用<code>git add</code>和<code>git commit</code>将修改后的代码进行提交操作就可以了。</p>
</li>
</ol>
]]></content>
      <categories>
        <category>Tutorial</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/uncategorized/2022-11-13-hello-world/</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<span id="more"></span>

<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>
]]></content>
  </entry>
  <entry>
    <title>vant-使用Dialog或Toast显示表单校验的错误提示</title>
    <url>/vue/2023-01-07-vant-%E4%BD%BF%E7%94%A8Dialog%E6%88%96Toast%E6%98%BE%E7%A4%BA%E8%A1%A8%E5%8D%95%E6%A0%A1%E9%AA%8C%E7%9A%84%E9%94%99%E8%AF%AF%E6%8F%90%E7%A4%BA/</url>
    <content><![CDATA[<p>有些时候我们不想使用vant原生的错误提示，而是想使用<code>Dialog</code>或<code>Toast</code>的形式来显示表单校验的错误提示时，可以使用以下方案：</p>
<span id="more"></span>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">van-form</span></span></span><br><span class="line"><span class="tag">  @<span class="attr">submit</span>=<span class="string">&quot;onSubmit&quot;</span></span></span><br><span class="line"><span class="tag">  @<span class="attr">failed</span>=<span class="string">&quot;onFailed&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">validate-trigger</span>=<span class="string">&quot;onSubmit&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:validate-first</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:show-error-message</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-cell-group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-field</span></span></span><br><span class="line"><span class="tag">      <span class="attr">v-model</span>=<span class="string">&quot;loginForm.username&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">type</span>=<span class="string">&quot;tel&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">name</span>=<span class="string">&quot;username&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">label</span>=<span class="string">&quot;手机号&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">placeholder</span>=<span class="string">&quot;请输入手机号&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:rules</span>=<span class="string">&quot;rules.username&quot;</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-field</span></span></span><br><span class="line"><span class="tag">      <span class="attr">v-model</span>=<span class="string">&quot;loginForm.password&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">type</span>=<span class="string">&quot;password&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">name</span>=<span class="string">&quot;password&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">label</span>=<span class="string">&quot;密码&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">placeholder</span>=<span class="string">&quot;请输入密码&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:rules</span>=<span class="string">&quot;rules.password&quot;</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">van-cell-group</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-button</span> <span class="attr">round</span> <span class="attr">block</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">native-type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">van-form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>参数说明：</p>
<ul>
<li><code>@submit</code>：该事件为提交表单且验证通过后触发，回调参数<code>values</code>为表单数据，使用该事件配合axios将校验通过的表单数据传递到后端。</li>
<li><code>@failed</code>：该事件为提交表单且验证不通过后触发，回调参数<code>errorInfo</code>中包含错误数据和错误提示信息，使用该事件配合<code>Dialog</code>或<code>Toast</code>将错误提示信息显示出来。</li>
<li><code>validate-trigger</code>：该参数为表单校验触发时机，<code>onSubmit</code>表示仅在提交表单时触发校验。</li>
<li><code>validate-first</code>：该参数为是否在某一项校验不通过时停止校验，该值为<code>false</code>时只会显示校验不通过的最后一项的错误提示。</li>
<li><code>show-error-message</code>：该参数为是否在校验不通过时在输入框下方展示错误提示，将该值设为<code>true</code>关闭vant原生的错误提示。</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; validTel, validPassword &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/validate&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">loginForm</span>: &#123;</span><br><span class="line">        <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="attr">password</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">rules</span>: &#123;</span><br><span class="line">        <span class="attr">username</span>: [</span><br><span class="line">          &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请输入手机号！&#x27;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">validator</span>: validTel, <span class="attr">message</span>: <span class="string">&#x27;请输入正确格式的手机号！&#x27;</span> &#125;</span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">password</span>: [</span><br><span class="line">          &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请输入登录密码！&#x27;</span>&#125;,</span><br><span class="line">          &#123; <span class="attr">validator</span>: validPassword, <span class="attr">message</span>: <span class="string">&#x27;请输入正确格式的登录密码！&#x27;</span> &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">onSubmit</span>(<span class="params">values</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;submit&#x27;</span>, values)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">onFailed</span>(<span class="params">errorInfo</span>) &#123;</span><br><span class="line">      <span class="title class_">Dialog</span>.<span class="title function_">alert</span>(&#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;温馨提示&#x27;</span>,</span><br><span class="line">        <span class="attr">message</span>: errorInfo.<span class="property">errors</span>[<span class="number">0</span>].<span class="property">message</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>当提交表单且验证不通过时，<code>@failed</code>事件将会被触发，我们可以使用<code>Dialog</code>或<code>Toast</code>的形式将回调参数中的错误提示信息显示出来。</li>
<li>这里将一些常用的校验规则封装到<code>src/utils/validate.js</code>中，方便后续使用，例如：</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 校验手机号</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">tel</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">Boolean</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">validTel</span>(<span class="params">tel</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> reg = <span class="regexp">/^((13|15|16|17|18|19)[0-9]|147)\d&#123;8&#125;$/</span></span><br><span class="line">  <span class="keyword">return</span> reg.<span class="title function_">test</span>(tel)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
        <tag>vant</tag>
      </tags>
  </entry>
  <entry>
    <title>vant-发送短信验证码</title>
    <url>/vue/2023-01-07-vant-%E5%8F%91%E9%80%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81/</url>
    <content><![CDATA[<p>该方案实现以下功能：</p>
<ol>
<li>发送短信验证码前进行表单验证</li>
<li>点击发送验证码按钮后显示60s后重新发送</li>
<li>以<code>Dialog</code>的形式显示错误提示，具体实现点击<a href="/vue/2023-01-07-vant-%E4%BD%BF%E7%94%A8Dialog%E6%88%96Toast%E6%98%BE%E7%A4%BA%E8%A1%A8%E5%8D%95%E6%A0%A1%E9%AA%8C%E7%9A%84%E9%94%99%E8%AF%AF%E6%8F%90%E7%A4%BA">这里</a>查看</li>
</ol>
<span id="more"></span>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">van-form</span></span></span><br><span class="line"><span class="tag">  <span class="attr">ref</span>=<span class="string">&quot;loginForm&quot;</span></span></span><br><span class="line"><span class="tag">  @<span class="attr">submit</span>=<span class="string">&quot;onSubmit&quot;</span></span></span><br><span class="line"><span class="tag">  @<span class="attr">failed</span>=<span class="string">&quot;onFailed&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">validate-trigger</span>=<span class="string">&quot;onSubmit&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:validate-first</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:show-error-message</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-cell-group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-field</span></span></span><br><span class="line"><span class="tag">      <span class="attr">v-model</span>=<span class="string">&quot;loginForm.username&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">type</span>=<span class="string">&quot;tel&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">name</span>=<span class="string">&quot;username&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">label</span>=<span class="string">&quot;手机号&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">placeholder</span>=<span class="string">&quot;请输入手机号&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:rules</span>=<span class="string">&quot;rules.username&quot;</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-field</span></span></span><br><span class="line"><span class="tag">      <span class="attr">v-model</span>=<span class="string">&quot;loginForm.password&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">type</span>=<span class="string">&quot;password&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">name</span>=<span class="string">&quot;password&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">label</span>=<span class="string">&quot;密码&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">placeholder</span>=<span class="string">&quot;请输入密码&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:rules</span>=<span class="string">&quot;rules.password&quot;</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-field</span></span></span><br><span class="line"><span class="tag">      <span class="attr">v-model</span>=<span class="string">&quot;loginForm.smsVerificationCode&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">type</span>=<span class="string">&quot;digit&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">name</span>=<span class="string">&quot;smsVerificationCode&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">label</span>=<span class="string">&quot;短信验证码&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">placeholder</span>=<span class="string">&quot;请输入短信验证码&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:rules</span>=<span class="string">&quot;rules.smsVerificationCode&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">template</span> #<span class="attr">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">van-button</span></span></span><br><span class="line"><span class="tag">          <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span></span></span><br><span class="line"><span class="tag">          @<span class="attr">click</span>=<span class="string">&quot;sendCode&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:loading</span>=<span class="string">&quot;loadingStatus&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:loading-text</span>=<span class="string">&quot;loadingText&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:disabled</span>=<span class="string">&quot;loadingStatus&quot;</span></span></span><br><span class="line"><span class="tag">          &gt;</span>发送验证码<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-field</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">van-cell-group</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-button</span> <span class="attr">round</span> <span class="attr">block</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">native-type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">van-form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li><code>this.$refs.loginForm.validate</code>：该方法用来验证表单，可以传入一个或多个<code>name</code>来选择性地验证部分表单项，当不传参数时会验证所有的表单项。</li>
<li>当表单验证不通过时，我们可以通过catch捕获到错误提示信息，并使用Dialog或Toast的形式将错误提示信息显示出来。</li>
<li>当表单验证通过时，我们将<code>Button</code>的<code>loading</code>和<code>disabled</code>等属性设置为<code>true</code>，并开启定时器，将<code>loading-text</code>属性设置为<code>60s后重新发送</code>。</li>
<li>当60s结束后清除定时器，将<code>Button</code>的<code>loading</code>和<code>disabled</code>等属性设置为<code>false</code>，并将等待时间恢复到60s。</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; validTel, validPassword, validSMSCode &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/validate&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">loginForm</span>: &#123;</span><br><span class="line">        <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="attr">password</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="attr">smsVerificationCode</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">loadingStatus</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">loadingText</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      <span class="attr">waitTime</span>: <span class="number">60</span>,</span><br><span class="line">      <span class="attr">rules</span>: &#123;</span><br><span class="line">        <span class="attr">username</span>: [</span><br><span class="line">          &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请输入手机号！&#x27;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">validator</span>: validTel, <span class="attr">message</span>: <span class="string">&#x27;请输入正确格式的手机号！&#x27;</span> &#125;</span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">password</span>: [</span><br><span class="line">          &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请输入登录密码！&#x27;</span>&#125;,</span><br><span class="line">          &#123; <span class="attr">validator</span>: validPassword, <span class="attr">message</span>: <span class="string">&#x27;请输入正确格式的登录密码！&#x27;</span> &#125;</span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">smsVerificationCode</span>: [</span><br><span class="line">          &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请输入短信验证码！&#x27;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">validator</span>: validSMSCode, <span class="attr">message</span>: <span class="string">&#x27;请输入6位数字组成的短信验证码！&#x27;</span> &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">onSubmit</span>(<span class="params">values</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;submit&#x27;</span>, values)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">onFailed</span>(<span class="params">errorInfo</span>) &#123;</span><br><span class="line">      <span class="title class_">Dialog</span>.<span class="title function_">alert</span>(&#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;温馨提示&#x27;</span>,</span><br><span class="line">        <span class="attr">message</span>: errorInfo.<span class="property">errors</span>[<span class="number">0</span>].<span class="property">message</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">sendCode</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">loginForm</span></span><br><span class="line">        .<span class="title function_">validate</span>([<span class="string">&#x27;username&#x27;</span>, <span class="string">&#x27;password&#x27;</span>])</span><br><span class="line">        .<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">loadingStatus</span> = <span class="literal">true</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">loadingText</span> = <span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.waitTime&#125;</span>s后重新发送`</span></span><br><span class="line">          <span class="keyword">let</span> timer = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">waitTime</span> &gt; <span class="number">1</span>) &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">waitTime</span>--</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">loadingText</span> = <span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.waitTime&#125;</span>s后重新发送`</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">              <span class="built_in">clearInterval</span>(timer)</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">loadingStatus</span> = <span class="literal">false</span></span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">waitTime</span> = <span class="number">60</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;, <span class="number">1000</span>)</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;发送短信验证码&#x27;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">catch</span>(<span class="function">(<span class="params">errors</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title class_">Dialog</span>.<span class="title function_">alert</span>(&#123;</span><br><span class="line">            <span class="attr">title</span>: <span class="string">&#x27;温馨提示&#x27;</span>,</span><br><span class="line">            <span class="attr">message</span>: errors[<span class="number">0</span>].<span class="property">message</span></span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
        <tag>vant</tag>
      </tags>
  </entry>
</search>
